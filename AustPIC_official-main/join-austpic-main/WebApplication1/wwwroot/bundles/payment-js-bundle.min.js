function clickPayButton(){loadingDialog=bootbox.dialog({message:'<p class="text-center mb-0"><i class="fa fa-spin fa-cog"><\/i> Please wait while bkash payment gateway is loading...<\/p>',closeButton:!1}).on("shown.bs.modal",function(){$("#bKash_button").trigger("click")})}var loadingDialog,PaymentID;$(document).ready(function(){bKash.init({paymentMode:"checkout",paymentRequest:{amount:PAYMENT_FEE,intent:"sale"},createRequest:function(){$.ajax({url:ClubWebsiteUrls.MERCHANT_BACKEND_CREATE_API_CALLER_URL,type:"POST",contentType:"application/json",headers:{"XSRF-TOKEN-Join-AUSTPIC-App":$('input[name="XSRF-TOKEN-Join-AUSTPIC-App"]').val()},success:function(n){var t=n;if(n&&t.paymentID!=null){PaymentID=t.paymentID;loadingDialog.modal("hide");bKash.create().onSuccess(t)}else loadingDialog.modal("hide"),bKash.create().onError(),bootbox.alert({title:"Payment Unsuccessful",message:t.errorMessage})},error:function(){loadingDialog.modal("hide");bKash.create().onError();bootbox.alert({title:"Payment Unsuccessful",message:data.errorMessage})}})},executeRequestOnAuthorization:function(){$.ajax({url:ClubWebsiteUrls.MERCHANT_BACKEND_EXECUTE_API_CALLER_URL,type:"GET",cache:!1,headers:{"XSRF-TOKEN-Join-AUSTPIC-App":$('input[name="XSRF-TOKEN-Join-AUSTPIC-App"]').val()},data:{PaymentID:PaymentID},success:function(n){n&&n.paymentID!=null?(loadingDialog.modal("hide"),window.location.href=ClubWebsiteUrls.SUCCESSFUL_PAYMENT):(bKash.execute().onError(),loadingDialog.modal("hide"),bootbox.alert({title:"Payment Unsuccessful",message:n.errorMessage}))},error:function(){bKash.execute().onError();loadingDialog.modal("hide");bootbox.alert({title:"Payment Unsuccessful",message:data.errorMessage})}})},onClose:function(){bootbox.alert({title:"Failed",message:"User cancelled the transaction"})}});$("#bKash_button").removeAttr("disabled")});